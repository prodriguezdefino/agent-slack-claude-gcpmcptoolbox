<mxfile host="app.diagrams.net" agent="Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36" version="27.1.1">
  <diagram name="Slack-Claude-GCP-Architecture" id="slack-claude-gcp">
    <mxGraphModel dx="1572" dy="856" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1200" pageHeight="800" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="title" value="Slack Claude GCP MCP Toolbox Integration Architecture" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=24;fontStyle=1;fontColor=#2c3e50;" parent="1" vertex="1">
          <mxGeometry x="10" width="650" height="40" as="geometry" />
        </mxCell>
        <mxCell id="slack" value="&lt;b&gt;Slack Workspace&lt;/b&gt;&lt;br&gt;&lt;br&gt;Users mention bot&lt;br&gt;Thread conversations&lt;br&gt;@mention events&lt;br&gt;&lt;br&gt;&lt;font size=&quot;2&quot;&gt;Socket Mode / Events API&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#4A154B;strokeColor=#2c3e50;strokeWidth=2;fontColor=#FFFFFF;align=center;verticalAlign=middle;" parent="1" vertex="1">
          <mxGeometry x="50" y="80" width="200" height="120" as="geometry" />
        </mxCell>
        <mxCell id="flow1" value="1" style="ellipse;whiteSpace=wrap;html=1;fillColor=#e74c3c;strokeColor=none;fontColor=#FFFFFF;fontStyle=1;fontSize=12;" parent="1" vertex="1">
          <mxGeometry x="163" y="48" width="24" height="24" as="geometry" />
        </mxCell>
        <mxCell id="gcp-container" value="&lt;b&gt;Google Cloud Platform&lt;/b&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#4285F4;fillOpacity=10;strokeColor=#4285F4;strokeWidth=2;fontColor=#4285F4;align=center;verticalAlign=top;fontSize=18;fontStyle=1;" parent="1" vertex="1">
          <mxGeometry x="350" y="60" width="500" height="600" as="geometry" />
        </mxCell>
        <mxCell id="spring-boot" value="&lt;b&gt;Spring Boot Service&lt;/b&gt;&lt;br&gt;&lt;font size=&quot;2&quot;&gt;(Cloud Run)&lt;/font&gt;&lt;br&gt;&lt;br&gt;• SlackEvent handlers&lt;br&gt;• Bolt SDK integration&lt;br&gt;• Message processing&lt;br&gt;• Thread management&lt;br&gt;• Reactive streams&lt;br&gt;&lt;br&gt;&lt;font size=&quot;1&quot;&gt;Port: 8080&lt;br&gt;Java 21 + Spring Boot 3.4.5&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#34A853;strokeColor=#2c3e50;strokeWidth=2;fontColor=#FFFFFF;align=center;verticalAlign=top;" parent="1" vertex="1">
          <mxGeometry x="380" y="120" width="200" height="180" as="geometry" />
        </mxCell>
        <mxCell id="flow2" value="2" style="ellipse;whiteSpace=wrap;html=1;fillColor=#e74c3c;strokeColor=none;fontColor=#FFFFFF;fontStyle=1;fontSize=12;" parent="1" vertex="1">
          <mxGeometry x="468" y="88" width="24" height="24" as="geometry" />
        </mxCell>
        <mxCell id="mcp-toolbox" value="&lt;b&gt;MCP Toolbox Server&lt;/b&gt;&lt;br&gt;&lt;font size=&quot;2&quot;&gt;(Cloud Run)&lt;/font&gt;&lt;br&gt;&lt;br&gt;• Database MCP tools&lt;br&gt;• BigQuery integration&lt;br&gt;• SSE endpoint (/mcp/sse)&lt;br&gt;• Tools: search, book,&lt;br&gt;update, cancel hotels&lt;br&gt;&lt;br&gt;&lt;font size=&quot;1&quot;&gt;Port: 8080&lt;br&gt;Config: Secret Manager&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FF6D01;strokeColor=#2c3e50;strokeWidth=2;fontColor=#FFFFFF;align=center;verticalAlign=top;" parent="1" vertex="1">
          <mxGeometry x="620" y="120" width="200" height="180" as="geometry" />
        </mxCell>
        <mxCell id="flow4" value="4" style="ellipse;whiteSpace=wrap;html=1;fillColor=#e74c3c;strokeColor=none;fontColor=#FFFFFF;fontStyle=1;fontSize=12;" parent="1" vertex="1">
          <mxGeometry x="708" y="88" width="24" height="24" as="geometry" />
        </mxCell>
        <mxCell id="bigquery" value="&lt;b&gt;BigQuery&lt;/b&gt;&lt;br&gt;&lt;br&gt;Dataset: mcp_sources&lt;br&gt;Table: hotels&lt;br&gt;• Hotel bookings data&lt;br&gt;• Location, pricing tiers&lt;br&gt;• Check-in/out dates" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#669DF6;strokeColor=#2c3e50;strokeWidth=2;fontColor=#FFFFFF;align=center;verticalAlign=top;" parent="1" vertex="1">
          <mxGeometry x="620" y="330" width="200" height="120" as="geometry" />
        </mxCell>
        <mxCell id="flow5" value="5" style="ellipse;whiteSpace=wrap;html=1;fillColor=#e74c3c;strokeColor=none;fontColor=#FFFFFF;fontStyle=1;fontSize=12;" parent="1" vertex="1">
          <mxGeometry x="708" y="298" width="24" height="24" as="geometry" />
        </mxCell>
        <mxCell id="artifact-registry" value="&lt;b&gt;Artifact Registry&lt;/b&gt;&lt;br&gt;&lt;br&gt;Docker images&lt;br&gt;CI/CD with Cloud Build" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#34A853;fillOpacity=80;strokeColor=#2c3e50;strokeWidth=2;fontColor=#FFFFFF;align=center;verticalAlign=top;" parent="1" vertex="1">
          <mxGeometry x="380" y="330" width="200" height="80" as="geometry" />
        </mxCell>
        <mxCell id="secret-manager" value="&lt;b&gt;Secret Manager&lt;/b&gt;&lt;br&gt;&lt;br&gt;MCP tools.yaml config&lt;br&gt;Slack tokens" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#34A853;fillOpacity=60;strokeColor=#2c3e50;strokeWidth=2;fontColor=#FFFFFF;align=center;verticalAlign=top;" parent="1" vertex="1">
          <mxGeometry x="380" y="440" width="200" height="80" as="geometry" />
        </mxCell>
        <mxCell id="terraform" value="&lt;b&gt;Terraform&lt;/b&gt;&lt;br&gt;&lt;br&gt;Infrastructure as Code&lt;br&gt;Automated deployment" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#623CE4;strokeColor=#2c3e50;strokeWidth=2;fontColor=#FFFFFF;align=center;verticalAlign=top;" parent="1" vertex="1">
          <mxGeometry x="380" y="550" width="200" height="80" as="geometry" />
        </mxCell>
        <mxCell id="claude" value="&lt;b&gt;Anthropic Claude&lt;/b&gt;&lt;br&gt;&lt;br&gt;LLM API&lt;br&gt;Model: claude-opus-4&lt;br&gt;Tool calling enabled&lt;br&gt;MCP protocol support" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#D4AF37;strokeColor=#2c3e50;strokeWidth=2;fontColor=#FFFFFF;align=center;verticalAlign=top;" parent="1" vertex="1">
          <mxGeometry x="940" y="150" width="200" height="120" as="geometry" />
        </mxCell>
        <mxCell id="flow3" value="3" style="ellipse;whiteSpace=wrap;html=1;fillColor=#e74c3c;strokeColor=none;fontColor=#FFFFFF;fontStyle=1;fontSize=12;" parent="1" vertex="1">
          <mxGeometry x="1040" y="112" width="24" height="24" as="geometry" />
        </mxCell>
        <mxCell id="legend-container" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#2c3e50;strokeWidth=1;" parent="1" vertex="1">
          <mxGeometry x="50" y="650" width="280" height="120" as="geometry" />
        </mxCell>
        <mxCell id="legend-title" value="&lt;b&gt;Data Flow&lt;/b&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontStyle=1;fontColor=#2c3e50;" parent="1" vertex="1">
          <mxGeometry x="150" y="660" width="80" height="20" as="geometry" />
        </mxCell>
        <mxCell id="legend1" value="Slack Events → Spring Boot" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontColor=#2c3e50;" parent="1" vertex="1">
          <mxGeometry x="100" y="685" width="150" height="15" as="geometry" />
        </mxCell>
        <mxCell id="legend2" value="Spring Boot → Claude API" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontColor=#2c3e50;" parent="1" vertex="1">
          <mxGeometry x="100" y="705" width="150" height="15" as="geometry" />
        </mxCell>
        <mxCell id="legend3" value="Claude → MCP Tools" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontColor=#2c3e50;" parent="1" vertex="1">
          <mxGeometry x="100" y="725" width="150" height="15" as="geometry" />
        </mxCell>
        <mxCell id="legend4" value="MCP → BigQuery" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontColor=#2c3e50;" parent="1" vertex="1">
          <mxGeometry x="100" y="745" width="150" height="15" as="geometry" />
        </mxCell>
        <mxCell id="arrow1" value="Events/Messages" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#4A154B;strokeWidth=3;fontColor=#4A154B;fontSize=10;labelPosition=center;verticalLabelPosition=top;align=center;verticalAlign=bottom;" parent="1" source="slack" target="spring-boot" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="300" y="140" />
              <mxPoint x="380" y="140" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="arrow2" value="Chat API calls" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#34A853;strokeWidth=3;fontColor=#34A853;fontSize=10;labelPosition=center;verticalLabelPosition=top;align=center;verticalAlign=bottom;" parent="1" source="spring-boot" target="claude" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="450" y="50" />
              <mxPoint x="1030" y="50" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="arrow3" value="MCP/SSE" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#34A853;strokeWidth=3;fontColor=#34A853;fontSize=10;labelPosition=center;verticalLabelPosition=top;align=center;verticalAlign=bottom;" parent="1" source="spring-boot" target="mcp-toolbox" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arrow4" value="Tool calls" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#D4AF37;strokeWidth=3;fontColor=#D4AF37;fontSize=10;labelPosition=center;verticalLabelPosition=bottom;align=center;verticalAlign=top;dashed=1;dashPattern=5 5;" parent="1" source="claude" target="mcp-toolbox" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="900" y="200" />
              <mxPoint x="900" y="200" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="arrow5" value="SQL queries" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#FF6D01;strokeWidth=3;fontColor=#FF6D01;fontSize=10;labelPosition=right;verticalLabelPosition=middle;align=left;verticalAlign=middle;" parent="1" source="mcp-toolbox" target="bigquery" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arrow6" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#34A853;strokeWidth=2;dashed=1;dashPattern=3 3;" parent="1" source="secret-manager" target="mcp-toolbox" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="600" y="480" />
              <mxPoint x="600" y="300" />
              <mxPoint x="620" y="300" />
            </Array>
          </mxGeometry>
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
